<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quản lí vật tư</title>
    <link
      rel="icon"
      type="image/x-icon"
      href="..//Assets/logo/android-icon-192x192.webp"
    />

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    />

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script src="https://unpkg.com/boxicons@2.1.4/dist/boxicons.js"></script>

    <link
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
      rel="stylesheet"
    />
    
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
      rel="stylesheet"
    />

    <script
    src="https://code.jquery.com/jquery-3.7.1.js"
    integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4="
    crossorigin="anonymous"
    ></script>

    <!-- <link
      href="https://fonts.googleapis.com/css2?family=Marck+Script&display=swap"
      rel="stylesheet"
    /> -->
    
    <link rel="stylesheet" href="Vat-tu-va-thiet-bi.css" />
    <script src="Vat-tu-va-thiet-bi.js" defer></script>
    
    <style>
      #alert-container {
        position: fixed;

        top: 0;

        left: 50%;

        transform: translateX(-50%);

        z-index: 1000;

        width: auto; /* Tự động điều chỉnh kích thước dựa trên nội dung */
      }
    </style>
  </head>
  <body>
    <div class="row">
      <div class="colum-sidebar">
        <nav class="sidebar locked">
          <div class="logo-items flex">
            <span class="nav-image">
              <img
                src="../Assets/logo/logo-y-te.png"
                alt="logo_img"
              />
            </span>
            <span class="logo-name">YHANOI</span>
            <i class="bx bx-lock-alt" id="lock-icon" title="Unlock Sidebar"></i>
            <i class="bx bx-x" id="sidebar-close"></i>
          </div>

          <div class="menu-container">
            <div class="menu-items">
              <ul class="menu-item">
                <div class="menu-title flex">
                  <span class="title">Dashboard</span>
                  <span class="line"></span>
                </div>
                <li class="item">
                  <a
                    href="../Trang-chu-admin/Trang-chu-admin.html"
                    class="link flex"
                  >
                    <i class="bx bxs-home"></i>
                    <span>Trang chủ</span>
                  </a>
                </li>
                <li class="item">
                  <a href="../Danh-muc/Danh-muc.html" class="link flex">
                    <i class="bx bxs-grid-alt"></i>
                    <span>Danh mục</span>
                  </a>
                </li>
              </ul>

              <ul class="menu-item">
                <div class="menu-title flex">
                  <span class="title">Editor</span>
                  <span class="line"></span>
                </div>
                <li class="item el-active">
                  <a
                    href="../Vat-tu-va-thiet-bi/Vat-tu-va-thiet-bi.html"
                    class="link flex"
                  >
                    <i class="bx bxs-data"></i>
                    <span>Vật tư và thiết bị</span>
                  </a>
                </li>
                <li class="item">
                  <a href="../Tai-Khoan/Tai-Khoan.html" class="link flex">
                    <i class="bx bxs-user-circle"></i>
                    <span>Tài khoản</span>
                  </a>
                </li>
              </ul>

              <ul class="menu-item">
                <div class="menu-title flex">
                  <span class="title">Management</span>
                  <span class="line"></span>
                </div>
                <li class="item">
                  <a href="../Nhan-vien/Nhan-vien.html" class="link flex">
                    <i class="bx bxs-group"></i>
                    <span>Nhân viên</span>
                  </a>
                </li>
                <li class="item">
                  <a href="../Phong-ban/Phong-ban.html" class="link flex">
                    <i class="bx bxs-building"></i>
                    <span>Phòng ban</span>
                  </a>
                </li>
              </ul>

              <ul class="menu-item">
                <div class="menu-title flex">
                  <span class="title">Document</span>
                  <span class="line"></span>
                </div>
                <li class="item">
                  <a href="../Phieu-xuat/Phieu-xuat.html" class="link flex">
                    <i class="bx bxs-archive-out"></i>
                    <span>Phiếu xuất</span>
                  </a>
                </li>
                <li class="item">
                  <a href="../Phieu-nhap/Phieu-nhap.html" class="link flex">
                    <i class="bx bxs-archive-in"></i>
                    <span>Phiếu nhập</span>
                  </a>
                </li>
                <li class="item">
                  <a href="../Bao-cao/Bao-cao.html" class="link flex">
                    <i class="bx bxs-folder-minus"></i>
                    <span>Báo cáo</span>
                  </a>
                </li>
              </ul>
            </div>
            <div class="sidebar-profile flex">
              <span class="nav-image">
                <img src="../Assets/logo/avata.avif" alt="logo-img" />
              </span>
              <div class="data-text">
                <span class="name">Nguyễn Huy Đạt</span>
                <span class="email">Admin</span>
                <span style="margin-left: 60px" class="icon-out">
                  <a href="../Trang-chu/Trang-chu.html">
                    <i
                      style="font-size: 25px"
                      class="btn btn-outline-danger bx bx-log-out"
                    ></i>
                  </a>
                </span>
              </div>
            </div>
          </div>
        </nav>
      </div>

      <div class="colum-content">
        <nav class="navbar navbar-expand-sm bg-light">
          <div class="container">
            <div class="nav-left">
              <i class="bx bx-menu" id="sidebar-open"></i>
              <a class="navbar-brand" href="#">
                <span class="nav-image">
                  <img src="../Assets/logo/avata.avif" alt="" />
                </span>
              </a>
              <form class="d-flex search-form">
                <div class="search-box-container">
                  <i class="bx bx-search search-icon"></i>
                  <input
                    class="search-box form-control me-2"
                    type="text"
                    placeholder="Tìm kiếm vật tư và thiết bị"
                  />
                </div>
                <button class="btn btn-outline-info ms-1">Search</button>
              </form>
            <button
              id="YeuCau"
              type="button"
              class="btn btn-out"
              data-bs-toggle="modal"
              data-bs-target="#modal-Yc"
              style="
                margin-left: 480px;
                height: 46px;
                background-color: #a5f3fc;
              "
            >
              Yêu cầu <span id="badge-count" class="badge bg-danger">0</span>
            </button>
            </div>
            <button class="btn-out btn btn-outline-danger">
              <a class="btn" href="../Trang-chu/Trang-chu.html">Đăng xuất</a>
            </button>
          </div>
        </nav>
        <div class="colum-title">
          <p>Vật tư và thiết bị</p>
        </div>
        <div class="btn-add">
          <button
            id="tao"
            type="button"
            class="m-2 rounded-2"
            data-bs-toggle="modal"
            data-bs-target="#modal-tao"
          >
            Tạo
          </button>

          <button
            id="xuat"
            type="button"
            class="m-2 rounded-2"
            data-bs-toggle="modal"
            data-bs-target="#modal-xuat"
          >
            Xuất
          </button>

          <button
            id="nhap"
            type="button"
            class="m-2 rounded-2"
            data-bs-toggle="modal"
            data-bs-target="#modal-nhap"
          >
            Nhập
          </button>
          <!-- tạo -->
          <div class="modal fade" id="modal-tao">
            <div class="modal-dialog">
              <div class="modal-content">
                <div
                  class="modal-header d-flex justify-content-center position-relative"
                >
                  <h4>Tạo Vật tư</h4>
                  <button
                    type="button"
                    class="btn-close position-absolute end-0 me-3"
                    data-bs-dismiss="modal"
                  ></button>
                </div>
                <div class="modal-body">
                  <p>Tên vật tư</p>
                  <input type="text" id="ten-vat-tu" required />
                  <p class="mt-3">Mô tả</p>
                  <textarea rows="4" id="mo-ta" required></textarea>
                  <p>Thương hiệu</p>
                  <input type="text" id="thuong-hieu" required />
                  <p>Kích thước</p>
                  <input type="text" id="kich-thuoc" required />
                  <p>Danh mục</p>

                  <fieldset>
                    <input
                      type="search"
                      autocomplete="off"
                      role="combobox"
                      list=""
                      id="danh-muc"
                      name="browsers"
                      required
                    />
                    <datalist id="browsers" role="listbox"> </datalist>
                  </fieldset>

                  <p>Màu</p>
                  <input type="text" id="mau" required />
                  <p>Ảnh</p>
                  <div class="upload-btn-wrapper">
                    <i class="bx bx-plus" style="font-size: 24px"></i>
                    <span role="button"> Tải ảnh lên</span>
                    <input
                      id="anh-vat-tu"
                      type="file"
                      accept="image/png,image/jpg,image/jpeg"
                    />
                  </div>
                  <!-- <div id="image-preview-container" style="display: inline-block; margin-left: 10px;">
                                <img id="preview-img" style="width: 100px; height: 100px;" src="" alt="">
                            </div> -->
                  <p>Số lượng</p>
                  <input
                    id="so-luong"
                    style="width: 100px"
                    type="number"
                    autocomplete="off"
                    value="1"
                    min="1"
                  />
                </div>
                <div class="modal-footer">
                  <button
                    type="button"
                    class="btn btn-danger"
                    data-bs-dismiss="modal"
                  >
                    Hủy
                  </button>
                  <button onclick="add()" type="button" class="btn btn-info">
                    Tạo
                  </button>
                </div>
              </div>
            </div>
          </div>
          <!-- phiếu nhập -->
          <div class="modal fade" id="modal-nhap">
            <div class="modal-dialog">
              <div class="modal-content">
                <div
                  class="modal-header d-flex justify-content-center position-relative"
                >
                  <h4>Phiếu nhập kho</h4>
                  <button
                    type="button"
                    class="btn-close position-absolute end-0 me-3"
                    data-bs-dismiss="modal"
                  ></button>
                </div>
                <div class="modal-body">
                  <div class="mb-3">
                    <button
                      class="them-vat-tu btn btn-info"
                      style="color: white"
                      onclick="render_nhap()"
                    >
                      Thêm vật tư
                    </button>
                  </div>
                  <div>
                    <table
                      style="table-layout: auto"
                      class="table-phieu-nhap table"
                      id="render-nhap"
                    >
                      <thead>
                        <tr>
                          <th style="width: 40%">Tên vật tư</th>
                          <th>Số lượng</th>
                          <th>Hành động</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr></tr>
                      </tbody>
                    </table>
                  </div>
                  <div class="mt-5">
                    <label>Tên phiếu nhập kho: </label>
                    <input
                      style="width: 68.3%"
                      type="text"
                      id="name-phieu-nhap-kho"
                    />
                  </div>
                </div>
                <div class="modal-footer">
                  <button
                    type="button"
                    class="btn btn-danger"
                    data-bs-dismiss="modal"
                  >
                    Hủy
                  </button>
                  <button
                    id="exportButton"
                    type="button"
                    data-bs-dismiss="modal"
                    class="nhap-phieu-kho btn btn-info"
                  >
                    Nhập
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- phiếu xuất -->
          <div class="modal fade" id="modal-xuat">
            <div class="modal-dialog">
              <div class="modal-content">
                <div
                  class="modal-header d-flex justify-content-center position-relative"
                >
                  <h4>Phiếu xuất kho</h4>
                  <button
                    type="button"
                    class="btn-close position-absolute end-0 me-3"
                    data-bs-dismiss="modal"
                  ></button>
                </div>
                <div class="modal-body">
                  <div class="mb-3">
                    <button
                      class="them-vat-tu btn btn-info"
                      style="color: white"
                      onclick="render_xuat()"
                    >
                      Thêm vật tư
                    </button>
                  </div>
                  <div>
                    <table
                      style="table-layout: auto"
                      class="table-phieu-xuat table"
                      id="render-xuat"
                    >
                      <thead>
                        <tr>
                          <th style="width: 40%">Tên vật tư</th>
                          <th>Số lượng</th>
                          <th>Hành động</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr></tr>
                      </tbody>
                    </table>
                  </div>
                  <div class="mt-5">
                    <div>
                      <label>Tên phiếu xuất kho: </label>
                      <input
                        style="width: 69.5%"
                        type="text"
                        id="name-phieu-xuat-kho"
                      />
                    </div>
                    <div class="mt-1">
                      <label>Phòng ban nhận: </label>
                      <fieldset class="fi-phong-ban-nhan">
                        <input
                          id="phong-ban-nhan"
                          type="search"
                          autocomplete="off"
                          role="combobox"
                          list=""
                          required
                        />
                        <datalist id="br-phong-ban-nhan" role="listbox">
                        </datalist>
                      </fieldset>
                    </div>
                    <div class="mt-1">
                      <label>Nhân viên nhận: </label>
                      <fieldset class="fi-nhan-vien-nhan">
                        <input
                          id="nhan-vien-nhan"
                          type="search"
                          autocomplete="off"
                          role="combobox"
                          list=""
                          required
                        />
                        <datalist id="br-nhan-vien-nhan" role="listbox">
                        </datalist>
                      </fieldset>
                    </div>
                  </div>
                </div>
                <div class="modal-footer">
                  <button
                    type="button"
                    class="btn btn-danger"
                    data-bs-dismiss="modal"
                  >
                    Hủy
                  </button>
                  <button
                    id="importButton"
                    type="button"
                    data-bs-dismiss="modal"
                    class="xuat-phieu-kho btn btn-info"
                  >
                    Xuất
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="table-responsive-xl">
          <table class="table-danh-muc table table-hover" id="render">
            <thead>
              <tr>
                <th>STT</th>
                <th>ID</th>
                <th>Tên vật tư</th>
                <th class="mo-ta">Mô tả</th>
                <th>Số lượng</th>
                <th>Thương hiệu</th>
                <th>Màu sắc</th>
                <th>Kích thước</th>
                <th>Danh mục</th>
                <th>Ảnh</th>
                <th style="width: 11%">Hành động</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
              </tr>
            </tbody>
          </table>
        </div>
        <div style="text-align: center;" class="modal fade" id="modal-Yc">
          <div class="modal-dialog">
            <div class="modal-content">
              <table class="table table-hover" id="render-yc">
                <thead>
                  <tr>
                    <th>STT</th>
                    <th>Tên vật tư</th>
                    <th>Người yêu cầu</th>
                    <th>Số lượng</th>
                    <th style="width: 20%;">Chức năng</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>1</td>
                    <td>1</td>
                    <td>1</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="alert-container"></div>

    <div id="confirmDelete" class="popover-content d-none">
      <div class="popover-heading">
        <i style='color: orange; font-size: 20px; margin-right: 5px;' class='bx bxs-error bx-flashing'></i>
        <!-- <box-icon  type='solid' color='orange' name='error'></box-icon> -->
        <span>Bạn có muốn xóa không?</span>
      </div>
      <div class="popover-body">
        <button class="btn btn-outline-primary btn-sm cancel">Hủy</button>
        <button class="btn btn-outline-danger btn-sm  xoa-real">Có</button>
      </div>
    </div>
    <script>
      let dataPb = JSON.parse(localStorage.getItem("YeuCauData")) || [];

      function saveData1() {
        localStorage.setItem("YeuCauData", JSON.stringify(dataPb));
      }

      function addNewItem(tenVatTu, nguoiDung, soLuong) {
        const newItem = {
          tenVatTu,
          soLuong,
          nguoiDung,
        };
        dataPb.push(newItem);
        saveData1();
        render1();
        updateBadgeCount();
      }

      function render1() {
        const tbody = document.querySelector("#render-yc tbody");
        tbody.innerHTML = "";
        dataPb.forEach((item, index) => {
          const row = document.createElement("tr");
          row.innerHTML = `
            <td>${index + 1}</td>
            <td>${item.tenVatTu}</td>
            <td>${item.nguoiDung}</td>
            <td>${item.soLuong}</td>
            <td>
                <button onclick="deleteItem1(${index})" class="btn-xoa btn btn-danger">Xóa</button>
            </td>
        `;
          tbody.appendChild(row);
        });
      }

      function updateBadgeCount() {
        const badge = document.getElementById("badge-count");
        const totalSoLuong = dataPb.length;
        badge.textContent = totalSoLuong;
      }
      window.onload = function () {
        // Update the badge count with the initial value
        updateBadgeCount();
      };
      function deleteItem1(index) {
        if (index !== -1) {
          dataPb.splice(index, 1);
          saveData1();
          render1();
          updateBadgeCount();
        }
      }

      document.addEventListener("DOMContentLoaded", render1);
    </script>
  </body>
</html>
